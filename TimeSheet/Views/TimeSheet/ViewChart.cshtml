@{
    ViewBag.Title = "tsChart";
}
@RenderPage("~/Shared/_Header.cshtml")
@RenderPage("~/Shared/_Navigation.cshtml")
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="~/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        alert("!!!");
        var text = '@ViewBag.dataJSON';
        alert(text);
        var jsonstr = JSON.stringify(text);
        alert(jsonstr);

        var text = '[{"created_at":1,"name":2,"age":42,"updated_at":22}]';

        var obj = JSON.parse(text);

        alert(obj[0].created_at);

        var result = [["Timerange","N"]];

        for (var i in obj[0])
            result.push([i, obj[0][i]]);
        alert(result);
        var data = google.visualization.arrayToDataTable(result);

        var options = {
            title: 'Company Performance',
            hAxis: { title: 'Year', titleTextStyle: { color: '#333' } },
            vAxis: { minValue: 0 }
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
</script>

<div class="container">
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
</div>

@RenderPage("~/Shared/_Footer.cshtml")
